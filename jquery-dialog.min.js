/*!
 * jquery-dialog.js
 * ----------------
 * Tiny modal dialog library
 *
 * @version 0.1.1 (2015-0903-1916)
 * @author mach3 <http://github.com/mach3>
 * @license MIT
 * @url https://github.com/mach3/jquery-dialog.js
 */
!function(a){a.typeName=function(a){var b=Object.prototype.toString.call(a).match(/^\[object\s(\w+)\]$/);return b?b[1]:void 0};var b=function(){var b,c;b=this,c=document.createElement("i").style,this.legacy=!("transform"in c||"-webkit-transform"in c||"-ms-transform"in c),this.close=a.proxy(this.close,this),this.items={},this.emitter=a(this),a.each(["on","off","trigger"],function(a,c){b[c]=function(){return this.emitter[c].apply(this.emitter,arguments),this}})};a.extend(b.prototype,{EVENT_CLOSE:"dialogclose",EVENT_OPEN:"dialogopen",emitter:null,legacy:null,container:null,current:null,items:null,dialog:null,options:{zIndex:99,className:"dialog",containerClassName:"dialog-container",width:"60%",clone:!1,duration:300,backgroundColor:"rgba(0, 0, 0, .9)",top:"auto"},initContainer:function(){var b=this.options;this.container||(this.container=a("<div>",{"class":b.containerClassName}).css({display:"none",position:"fixed",backgroundColor:b.backgroundColor,width:"100%",height:"100%",left:0,top:0}).prependTo("body").on("click",this.close).on("click","[data-dialog-close]",this.close).on("click","[data-dialog-item]",function(a){a.stopPropagation()}))},config:function(b){this.options=a.extend({},this.options,b)},open:function(b,c){var d,e,f,g,h;this.initContainer(),d=this.options,e={},b.jquery||/HTML.*Element/.test(a.typeName(b))?(c=c||{},e=a.extend({name:null,clone:!1,content:b,width:d.width,top:d.top},c)):b.dialog in this.items?e=this.items[b.dialog]:(e=a.extend({width:d.width,clone:d.clone,top:d.top},{name:b.dialog,width:b.dialogWidth,top:b.dialogTop,clone:""===b.dialogClone?!0:b.dialogClone}),f=a(e.name),e.parent=f.parent(),e.content=f,this.items[b.dialog]=e),g=a("<div>",{"class":d.className,"data-dialog-item":"true"}).css({position:"relative",width:e.width,top:"auto"===e.top?"50%":e.top,margin:"auto"}).append(e.clone?e.content.clone():e.content),"auto"===e.top&&(this.legacy?(g.css({position:"absolute",visibility:"hidden"}).prependTo("body"),h={width:g.outerWidth(),height:g.outerHeight()},g.css({visibility:"visible",left:"50%","margin-top":-1*h.height/2,"margin-left":-1*h.width/2})):g.css("transform","translateY(-50%)")),this.container.append(g).fadeIn(d.duration),this.current=e.name,this.dialog=g,this.trigger(this.EVENT_OPEN)},close:function(){var a,b,c;a=this.options,c=this.items[this.current],b=this,this.container.fadeOut(a.duration,function(){c&&!c.clone&&c.content.appendTo(c.parent),b.container.children().remove()}),this.trigger(this.EVENT_CLOSE),this.dialog=null,this.current=null}}),a.dialog=new b,a.fn.dialog=function(b){a.dialog.open(this,b)},a(document).on("click","[data-dialog]",function(b){b.preventDefault(),a.dialog.open(a(this).data())})}(jQuery);